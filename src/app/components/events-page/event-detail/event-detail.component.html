<app-header></app-header>
<div class="container col-xxl-8 px-4 py-5">
  <div class="row flex-lg-row-reverse align-items-center g-5 py-5">
    <div class="col-10 col-sm-8 col-lg-6">
      <img
        src="{{
          event?.pictureUrl ||
            'https://climate.onep.go.th/wp-content/uploads/2020/01/default-image.jpg'
        }}"
        class="d-block mx-lg-auto img-fluid"
        alt="Bootstrap Themes"
        width="700"
        height="500"
        loading="lazy"
        ngOptimizedImage
      />
    </div>
    <div class="col-lg-6">
      <h1 class="display-5 fw-bold lh-1 mb-3">
        {{ event?.name }}
      </h1>
      <p class="lead">{{ event?.description }}</p>
      <div class="d-flex gap-2">
        <div class="d-grid gap-2 d-md-flex justify-content-md-start">
          <button type="button" class="btn btn-primary btn-lg px-4 me-md-2">
            {{ event?.location?.name }}
          </button>
        </div>
        <div class="d-grid gap-2 d-md-flex justify-content-md-start">
          <button type="button" class="btn btn-primary btn-lg px-4 me-md-2">
            {{ event?.category?.name }}
          </button>
        </div>
      </div>
    </div>
  </div>
  <!-- <section>
    <div class="container my-5 py-5">
      <div class="row d-flex justify-content-start">
        <div class="col-md-12 col-lg-10 col-xl-8">
          <div class="card">
            <div class="card-body" *ngFor="let comment of event?.comments">
              <div class="d-flex flex-start align-items-center">
                <img
                  class="rounded-circle shadow-1-strong me-3"
                  src="https://thumbs.dreamstime.com/b/default-avatar-profile-trendy-style-social-media-user-icon-187599373.jpg"
                  alt="avatar"
                  width="60"
                  height="60"
                />
                <div>
                  <h6 class="fw-bold text-primary mb-1">
                    {{ comment.appUser.firstName }}
                    {{ comment.appUser.lastName }}
                  </h6>
                  <p class="text-muted small mb-0">
                    Written on : {{ comment.dateCreated }}
                  </p>
                </div>
              </div>

              <p class="mt-3 mb-4 pb-2">
                {{ comment.comment }}
              </p>

              <div class="small d-flex justify-content-start gap-2">
                <a href="#" class="d-flex align-items-center me-3">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="icn"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M6.633 10.5c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75A2.25 2.25 0 0116.5 4.5c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 00-1.423-.23H5.904M14.25 9h2.25M5.904 18.75c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 01-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 10.203 4.167 9.75 5 9.75h1.053c.472 0 .745.556.5.96a8.958 8.958 0 00-1.302 4.665c0 1.194.232 2.333.654 3.375z"
                    />
                  </svg>

                  <p class="mb-0">Like</p>
                </a>
                <a href="#" class="d-flex align-items-center me-3 gap-2">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="icn"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 01-2.555-.337A5.972 5.972 0 015.41 20.97a5.969 5.969 0 01-.474-.065 4.48 4.48 0 00.978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25z"
                    />
                  </svg>

                  <p class="mb-0">Comment</p>
                </a>
                <a href="#" class="d-flex align-items-center me-3 gap-2">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    class="icn"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"
                    />
                  </svg>

                  <p class="mb-0">Share</p>
                </a>
              </div>
            </div>
            
          </div>
        </div>
      </div>
    </div>
  </section>
</div> -->
  <section>
    <div class="container my-5 py-5">
      <div class="row d-flex justify-content-center">
        <div class="col-md-12 col-lg-10">
          <div class="card text-dark">
            <div
              class="card-body p-4"
              *ngFor="let comment of event?.comments; let indexel = index"
            >
              <h4 class="mb-0" *ngIf="indexel == 0">Recent comments</h4>
              <p class="fw-light mb-4 pb-2" *ngIf="indexel == 0">
                Latest Comments section by users
              </p>
              <div class="d-flex flex-start" *ngIf="!comment.appUser.isBanned">
                <img
                  class="rounded-circle shadow-1-strong me-3"
                  src="https://thumbs.dreamstime.com/b/default-avatar-profile-trendy-style-social-media-user-icon-187599373.jpg"
                  alt="avatar"
                  width="60"
                  height="60"
                />
                <div>
                  <h6 class="fw-bold mb-1">
                    {{ comment.appUser.firstName }}
                    {{ comment.appUser.lastName }}
                  </h6>
                  <div class="d-flex align-items-center mb-3">
                    <p class="mb-0">
                      {{ comment.dateCreated | date }}
                      <span class="badge bg-primary">Pending</span>
                    </p>
                    <a href="#!" class="link-muted"
                      ><i class="fas fa-pencil-alt ms-2"></i
                    ></a>
                    <a href="#!" class="link-muted"
                      ><i class="fas fa-redo-alt ms-2"></i
                    ></a>
                    <a href="#!" class="link-muted"
                      ><i class="fas fa-heart ms-2"></i
                    ></a>
                  </div>
                  <div
                    class="d-flex justify-content-between align-items-center"
                  >
                    <p class="mb-0">
                      {{ comment.comment }}
                    </p>
                    <button
                      class="mb-0 btn btn-danger"
                      (click)="banUser(comment.appUser.id)"
                      *ngIf="admin"
                    >
                      {{ comment.appUser.isBanned ? "Unban User" : "Ban User" }}
                    </button>
                  </div>
                  <p *ngIf="banError">{{ banMessage }}</p>
                </div>
              </div>
              <hr class="my-0 mt-3" />
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer py-3 border-0" style="background-color: #f8f9fa">
      <form #f="ngForm" (ngSubmit)="addComment(f)">
        <div class="d-flex flex-start w-100">
          <img
            class="rounded-circle shadow-1-strong me-3"
            src="https://thumbs.dreamstime.com/b/default-avatar-profile-trendy-style-social-media-user-icon-187599373.jpg"
            alt="avatar"
            width="40"
            height="40"
          />
          <div class="form-outline w-100">
            <textarea
              class="form-control"
              id="textAreaExample"
              rows="4"
              style="background: #fff"
              ngModel
              name="comment"
            ></textarea>
            <label class="form-label" for="textAreaExample">Message</label>
          </div>
        </div>
        <div class="d-flex gap-2">
          <div class="float-end mt-2 pt-1" *ngIf="!loading">
            <button type="submit" class="btn btn-primary btn-sm">
              Post comment
            </button>
            <button type="button" class="btn btn-outline-primary btn-sm">
              Cancel
            </button>
          </div>
          <div *ngIf="loading" class="">
            <div class="spinner-border" role="status"></div>
          </div>
        </div>
        <div class="divider d-flex align-items-center my-4" *ngIf="hasError">
          <p class="text-center fw-bold mx-3 mb-0 text-danger">{{ error }}</p>
        </div>
      </form>
    </div>
  </section>
</div>
